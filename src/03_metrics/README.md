# 03_metrics: ç½‘ç»œæ‹“æ‰‘æŒ‡æ ‡è®¡ç®—æ¨¡å—

## ğŸ¯ **ç ”ç©¶ä½¿å‘½**

æœ¬æ¨¡å—æ˜¯**"è½¨é“ä¸€ï¼šå®Œæ•´ç½‘ç»œåˆ†æ"**çš„æ ¸å¿ƒè®¡ç®—å¼•æ“ï¼Œè´Ÿè´£å°†02æ¨¡å—æ„å»ºçš„å¹´åº¦ç½‘ç»œè½¬åŒ–ä¸ºå¯é‡åŒ–çš„æ‹“æ‰‘ç‰¹å¾æŒ‡æ ‡ã€‚å…¶ä½¿å‘½æ˜¯é€šè¿‡ä¸¥è°¨çš„ç½‘ç»œç§‘å­¦æ–¹æ³•ï¼Œç³»ç»Ÿæ€§åœ°åº¦é‡å…¨çƒèƒ½æºè´¸æ˜“ç½‘ç»œçš„ç»“æ„ç‰¹å¾ï¼Œä¸ºåç»­çš„æ”¿ç­–å½±å“åˆ†æã€åŠ¨æ€é”å®šæŒ‡æ•°è®¡ç®—å’Œéª¨å¹²ç½‘ç»œæå–æä¾›åšå®çš„æ•°é‡åŸºç¡€ã€‚

## ğŸ“š **ç†è®ºåŸºç¡€ä¸æ–¹æ³•è®º**

### **ç½‘ç»œä¸­å¿ƒæ€§ç†è®º**

æœ¬æ¨¡å—åŸºäºç»å…¸çš„**ç¤¾ä¼šç½‘ç»œåˆ†æç†è®º**å’Œ**å¤æ‚ç½‘ç»œç§‘å­¦èŒƒå¼**ï¼Œå®ç°äº†äº”ç§æ ¸å¿ƒä¸­å¿ƒæ€§æŒ‡æ ‡çš„è®¡ç®—ï¼š

#### **1. åº¦ä¸­å¿ƒæ€§ (Degree Centrality)**
**ç†è®ºåŸºç¡€**: Freeman (1978) çš„ä¸­å¿ƒæ€§ç†è®ºåŸºç¡€
- **å…¥åº¦ä¸­å¿ƒæ€§**: è¡¡é‡å›½å®¶ä½œä¸ºèƒ½æºè¿›å£æ–¹çš„è¿æ¥å¹¿åº¦
- **å‡ºåº¦ä¸­å¿ƒæ€§**: è¡¡é‡å›½å®¶ä½œä¸ºèƒ½æºå‡ºå£æ–¹çš„è¿æ¥å¹¿åº¦  
- **æ€»åº¦ä¸­å¿ƒæ€§**: åæ˜ å›½å®¶åœ¨å…¨çƒèƒ½æºè´¸æ˜“ä¸­çš„æ•´ä½“è¿æ¥é‡è¦æ€§

**è®¡ç®—å…¬å¼**:
```
In-Degree(i) = |{j : (j,i) âˆˆ E}|
Out-Degree(i) = |{j : (i,j) âˆˆ E}|
Total-Degree(i) = In-Degree(i) + Out-Degree(i)
```

#### **2. å¼ºåº¦ä¸­å¿ƒæ€§ (Strength Centrality)**  
**ç†è®ºåŸºç¡€**: Barrat et al. (2004) çš„åŠ æƒç½‘ç»œåˆ†æç†è®º
- **å…¥å¼ºåº¦**: å›½å®¶çš„æ€»èƒ½æºè¿›å£é¢ï¼Œåæ˜ å…¶ä½œä¸ºèƒ½æºæ¶ˆè´¹æ–¹çš„è§„æ¨¡
- **å‡ºå¼ºåº¦**: å›½å®¶çš„æ€»èƒ½æºå‡ºå£é¢ï¼Œåæ˜ å…¶ä½œä¸ºèƒ½æºä¾›åº”æ–¹çš„è§„æ¨¡
- **æ€»å¼ºåº¦**: å›½å®¶åœ¨å…¨çƒèƒ½æºè´¸æ˜“ä¸­çš„æ€»ä½“ç»æµé‡è¦æ€§

**è®¡ç®—å…¬å¼**:
```
In-Strength(i) = Î£ w(j,i) for all j where (j,i) âˆˆ E
Out-Strength(i) = Î£ w(i,j) for all j where (i,j) âˆˆ E  
Total-Strength(i) = In-Strength(i) + Out-Strength(i)
```

#### **3. ä¸­ä»‹ä¸­å¿ƒæ€§ (Betweenness Centrality)**
**ç†è®ºåŸºç¡€**: Freeman (1977) çš„ä¿¡æ¯æµæ§åˆ¶ç†è®º  
- **è¡¡é‡ç»´åº¦**: å›½å®¶åœ¨å…¨çƒèƒ½æºè´¸æ˜“è·¯å¾„ä¸­çš„"æ¡¥æ¢"ä½œç”¨
- **ç»æµå«ä¹‰**: æ§åˆ¶èƒ½æºæµåŠ¨ã€å…·å¤‡ä¾›åº”é“¾ä¸­è½¬èƒ½åŠ›çš„å›½å®¶è¯†åˆ«
- **æ”¿ç­–æ„ä¹‰**: è¯†åˆ«å¯¹å…¨çƒèƒ½æºå®‰å…¨å…·æœ‰å…³é”®å½±å“çš„"èŠ‚ç‚¹å›½å®¶"

**è®¡ç®—å…¬å¼**:
```
Betweenness(i) = Î£(Ïƒ_st(i)/Ïƒ_st) for all sâ‰ tâ‰ i
å…¶ä¸­ Ïƒ_st æ˜¯såˆ°tçš„æœ€çŸ­è·¯å¾„æ•°ï¼ŒÏƒ_st(i) æ˜¯ç»è¿‡èŠ‚ç‚¹içš„æœ€çŸ­è·¯å¾„æ•°
```

#### **4. PageRankä¸­å¿ƒæ€§**
**ç†è®ºåŸºç¡€**: Page et al. (1999) çš„æƒå¨æ€§æ’åç®—æ³•ï¼Œç½‘ç»œç§‘å­¦ä¸­çš„ç»å…¸å¨æœ›æµ‹åº¦
- **æ ¸å¿ƒæ€æƒ³**: è¢«é‡è¦å›½å®¶ä¾èµ–çš„å›½å®¶æœ¬èº«ä¹Ÿé‡è¦
- **èƒ½æºè§£é‡Š**: åæ˜ å›½å®¶åœ¨å…¨çƒèƒ½æºä¾›åº”é“¾ä¸­çš„"å¨æœ›åœ°ä½"
- **è¿­ä»£é€»è¾‘**: è€ƒè™‘è´¸æ˜“ä¼™ä¼´çš„é‡è¦æ€§åŠ æƒçš„é€’å½’å¨æœ›è®¡ç®—

**è®¡ç®—å…¬å¼**:
```
PR(i) = (1-d)/N + d Ã— Î£(PR(j)/L(j)) for all j linking to i
å…¶ä¸­ d æ˜¯é˜»å°¼ç³»æ•°ï¼ŒL(j) æ˜¯èŠ‚ç‚¹jçš„å‡ºé“¾æ¥æ•°
```

#### **5. ç‰¹å¾å‘é‡ä¸­å¿ƒæ€§ (Eigenvector Centrality)**
**ç†è®ºåŸºç¡€**: Bonacich (1987) çš„æƒåŠ›ä¸­å¿ƒæ€§ç†è®º
- **æ•°å­¦åŸºç¡€**: ç½‘ç»œé‚»æ¥çŸ©é˜µçš„ä¸»ç‰¹å¾å‘é‡
- **ç»æµå«ä¹‰**: ä¸å…¶ä»–é‡è¦å›½å®¶è¿æ¥å¯†åˆ‡çš„å›½å®¶å…·æœ‰æ›´é«˜ä¸­å¿ƒæ€§
- **é€‚ç”¨æ€§**: ç‰¹åˆ«é€‚åˆåˆ†æé«˜åº¦ç›¸äº’ä¾èµ–çš„å…¨çƒèƒ½æºè´¸æ˜“ç½‘ç»œ

### **å…¨å±€ç½‘ç»œæ‹“æ‰‘ç†è®º**

#### **1. ç½‘ç»œå¯†åº¦ (Network Density)**
**ç†è®ºåŸºç¡€**: Scott (2017) çš„ç¤¾ä¼šç½‘ç»œåˆ†æç»å…¸ç†è®º
- **æµ‹é‡ç»´åº¦**: å®é™…è¿æ¥æ•°ä¸æœ€å¤§å¯èƒ½è¿æ¥æ•°çš„æ¯”å€¼
- **ç»æµè§£é‡Š**: å…¨çƒèƒ½æºè´¸æ˜“çš„ä¸€ä½“åŒ–ç¨‹åº¦
- **æ—¶é—´æ¼”åŒ–**: åæ˜ å…¨çƒåŒ–è¿›ç¨‹ä¸­èƒ½æºå¸‚åœºçš„æ•´åˆè¶‹åŠ¿

#### **2. è¿é€šæ€§åˆ†æ (Connectivity Analysis)**
**ç†è®ºåŸºç¡€**: å›¾è®ºä¸­çš„è¿é€šæ€§ç†è®º
- **å¼ºè¿é€šåˆ†é‡**: è¯†åˆ«èƒ½æºè´¸æ˜“çš„"æ ¸å¿ƒé›†å›¢"
- **å¼±è¿é€šåˆ†é‡**: æµ‹é‡ç½‘ç»œçš„æ•´ä½“è¿é€šæ€§
- **æ”¿ç­–å«ä¹‰**: è¯„ä¼°èƒ½æºä¾›åº”é“¾çš„è„†å¼±æ€§å’ŒéŸ§æ€§

#### **3. è·¯å¾„é•¿åº¦åˆ†æ (Path Length Analysis)**  
**æ ¸å¿ƒä¿®æ­£**: åŠ æƒç½‘ç»œä¸­çš„æœ€çŸ­è·¯å¾„è®¡ç®—
- **è·ç¦»å®šä¹‰**: `distance = 1/weight`ï¼Œç¡®ä¿é«˜æƒé‡è¾¹å¯¹åº”çŸ­è·ç¦»
- **ç†è®ºä¾æ®**: è´¸æ˜“é¢è¶Šå¤§ï¼Œä¸¤å›½é—´çš„"ç»æµè·ç¦»"è¶Šè¿‘
- **è®¡ç®—æŒ‡æ ‡**: å¹³å‡æœ€çŸ­è·¯å¾„é•¿åº¦ã€ç½‘ç»œç›´å¾„ã€å…¨å±€æ•ˆç‡

**å…³é”®ç®—æ³•å®ç°**:
```python
def add_distance_weights(G: nx.DiGraph) -> nx.DiGraph:
    """
    ä¸ºåŠ æƒæœ‰å‘å›¾æ·»åŠ è·ç¦»æƒé‡
    è·ç¦»æƒé‡ = 1 / è´¸æ˜“æƒé‡ï¼Œç”¨äºæœ€çŸ­è·¯å¾„è®¡ç®—
    """
    G_dist = G.copy()
    for u, v, data in G_dist.edges(data=True):
        weight = data.get('weight', 1)
        if weight > 0:
            data['distance'] = 1.0 / weight
        else:
            data['distance'] = float('inf')
    return G_dist
```

#### **4. èšç±»ç³»æ•° (Clustering Coefficient)**
**ç†è®ºåŸºç¡€**: Watts & Strogatz (1998) çš„å°ä¸–ç•Œç½‘ç»œç†è®º
- **å±€éƒ¨èšç±»**: å›½å®¶çš„è´¸æ˜“ä¼™ä¼´ä¹‹é—´çš„ç›¸äº’è¿æ¥ç¨‹åº¦
- **å…¨å±€èšç±»**: æ•´ä¸ªç½‘ç»œçš„"å°å›¢ä½“"ç‰¹å¾
- **ç»æµå«ä¹‰**: åŒºåŸŸè´¸æ˜“é›†å›¢åŒ–å’Œä¾›åº”é“¾æœ¬åœ°åŒ–ç¨‹åº¦

## ğŸ—ï¸ **æ¨¡å—æ¶æ„ä¸åŠŸèƒ½ç»„ç»‡**

### **æ ¸å¿ƒåŠŸèƒ½æ¨¡å—**

```
03_metrics/
â”œâ”€â”€ __init__.py              # ç»Ÿä¸€æ¥å£å’Œä¸»è¦è®¡ç®—å‡½æ•°
â”œâ”€â”€ node_metrics.py          # èŠ‚ç‚¹çº§åˆ«ä¸­å¿ƒæ€§æŒ‡æ ‡è®¡ç®—
â”œâ”€â”€ global_metrics.py        # å…¨å±€ç½‘ç»œæ‹“æ‰‘æŒ‡æ ‡è®¡ç®—  
â”œâ”€â”€ utils.py                # é€šç”¨å·¥å…·å‡½æ•°å’ŒéªŒè¯ç»„ä»¶
â”œâ”€â”€ parallel_computing.py    # å¹¶è¡Œè®¡ç®—å’Œæ€§èƒ½ä¼˜åŒ–
â”œâ”€â”€ tests/                  # å…¨é¢çš„å•å…ƒæµ‹è¯•å¥—ä»¶
â”‚   â”œâ”€â”€ test_node_metrics.py
â”‚   â”œâ”€â”€ test_global_metrics.py
â”‚   â”œâ”€â”€ test_integration.py
â”‚   â””â”€â”€ run_all_tests.py
â””â”€â”€ README.md               # æœ¬æ–‡æ¡£
```

### **å…³é”®ç®—æ³•ä¿®æ­£ä¸åˆ›æ–°**

#### **1. åŠ æƒæœ€çŸ­è·¯å¾„è®¡ç®—ä¿®æ­£**
**é—®é¢˜è¯†åˆ«**: åŸå§‹NetworkXç®—æ³•åœ¨å¤„ç†è´¸æ˜“æƒé‡æ—¶å­˜åœ¨é€»è¾‘é”™è¯¯
**è§£å†³æ–¹æ¡ˆ**: å®ç°æƒé‡-è·ç¦»è½¬æ¢æœºåˆ¶
```python
# é”™è¯¯åšæ³•: ç›´æ¥ä½¿ç”¨è´¸æ˜“é¢ä½œä¸ºè·ç¦»
path_length = nx.shortest_path_length(G, weight='weight')

# æ­£ç¡®åšæ³•: å°†è´¸æ˜“æƒé‡è½¬æ¢ä¸ºè·ç¦»æƒé‡
G_distance = add_distance_weights(G)
path_length = nx.shortest_path_length(G_distance, weight='distance')
```

#### **2. æ€§èƒ½ä¼˜åŒ–ç­–ç•¥**
**é‡‡æ ·ç­–ç•¥**: å¯¹äºè®¡ç®—å¯†é›†çš„æŒ‡æ ‡ï¼ˆå¦‚ä¸­ä»‹ä¸­å¿ƒæ€§ï¼‰ï¼Œé‡‡ç”¨èŠ‚ç‚¹é‡‡æ ·
```python
def get_node_sample(G: nx.DiGraph, sample_ratio: float = 0.1, min_nodes: int = 100) -> List[str]:
    """
    æ™ºèƒ½èŠ‚ç‚¹é‡‡æ ·ç­–ç•¥ï¼Œå¹³è¡¡è®¡ç®—æ•ˆç‡ä¸ç²¾åº¦
    """
    n_nodes = G.number_of_nodes()
    if n_nodes <= min_nodes:
        return list(G.nodes())
    
    sample_size = max(min_nodes, int(n_nodes * sample_ratio))
    # åŸºäºåº¦æ•°çš„åˆ†å±‚é‡‡æ ·ï¼Œç¡®ä¿é‡è¦èŠ‚ç‚¹è¢«åŒ…å«
    ...
```

**ç¼“å­˜æœºåˆ¶**: LRUç¼“å­˜å‡å°‘é‡å¤è®¡ç®—
```python
from functools import lru_cache

@lru_cache(maxsize=128)
def cached_shortest_path_calculation(graph_hash, source, target):
    """ç¼“å­˜æœ€çŸ­è·¯å¾„è®¡ç®—ç»“æœ"""
    ...
```

#### **3. æ•°æ®éªŒè¯æ¡†æ¶**
**å¤šå±‚æ¬¡éªŒè¯**: è¾“å…¥éªŒè¯ â†’ è®¡ç®—éªŒè¯ â†’ ç»“æœéªŒè¯
```python
def validate_graph(G: nx.DiGraph, context: str) -> None:
    """
    å…¨é¢çš„å›¾å¯¹è±¡éªŒè¯
    - æ£€æŸ¥å›¾çš„ç±»å‹å’Œæ ¼å¼
    - éªŒè¯è¾¹æƒé‡çš„æœ‰æ•ˆæ€§  
    - ç¡®ä¿èŠ‚ç‚¹æ ‡è¯†ç¬¦çš„ä¸€è‡´æ€§
    """
    
def validate_metrics_result(result: pd.DataFrame, expected_columns: List[str]) -> bool:
    """
    æŒ‡æ ‡è®¡ç®—ç»“æœéªŒè¯
    - æ£€æŸ¥æ•°æ®å®Œæ•´æ€§
    - éªŒè¯æ•°å€¼èŒƒå›´åˆç†æ€§
    - ç¡®ä¿æ— å¼‚å¸¸å€¼æˆ–ç¼ºå¤±å€¼
    """
```

## ğŸ“Š **æ ¸å¿ƒäº§å‡ºä¸æ•°æ®æ ¼å¼**

### **æ ‡å‡†åŒ–è¾“å‡ºæ ¼å¼**

#### **1. èŠ‚ç‚¹ä¸­å¿ƒæ€§æŒ‡æ ‡è¡¨ (`node_centrality_metrics.csv`)**
```
year | country_code | country_name | in_degree | out_degree | total_degree | 
     | in_strength | out_strength | total_strength | betweenness_centrality |
     | pagerank_centrality | eigenvector_centrality | ...
```

#### **2. å…¨å±€ç½‘ç»œæŒ‡æ ‡è¡¨ (`global_network_metrics.csv`)**  
```
year | density | avg_path_length | diameter | global_clustering |
     | efficiency | largest_scc_size | largest_wcc_size | ...
```

#### **3. ç»¼åˆæŒ‡æ ‡æ•°æ®è¡¨ (`all_metrics.csv`)**
- èŠ‚ç‚¹çº§åˆ«æŒ‡æ ‡ + å…¨å±€æŒ‡æ ‡çš„å®Œæ•´åˆå¹¶
- ä¸ºæ¯ä¸ªå›½å®¶-å¹´ä»½è§‚æµ‹å€¼æä¾›å®Œæ•´çš„ç½‘ç»œæ‹“æ‰‘ç‰¹å¾
- ç›´æ¥ç”¨äºåç»­æ¨¡å—çš„æ”¿ç­–åˆ†æå’ŒDLIè®¡ç®—

### **æ•°æ®è´¨é‡ä¿è¯**

#### **ç»Ÿè®¡éªŒè¯æŒ‡æ ‡**
```python
def get_metrics_summary_report(metrics_df: pd.DataFrame) -> Dict[str, Any]:
    """
    ç”ŸæˆæŒ‡æ ‡è®¡ç®—çš„è´¨é‡è¯„ä¼°æŠ¥å‘Š
    
    åŒ…å«:
    - æ•°æ®å®Œæ•´æ€§ç»Ÿè®¡
    - å¹´åº¦é—´è¶‹åŠ¿åˆ†æ  
    - å¼‚å¸¸å€¼æ£€æµ‹æŠ¥å‘Š
    - æ’åç¨³å®šæ€§åˆ†æ
    """
```

#### **å†å²è¿ç»­æ€§æ£€éªŒ**
- å¹´åº¦é—´æŒ‡æ ‡å˜åŒ–çš„å¹³æ»‘æ€§éªŒè¯
- æå€¼å˜åŒ–çš„åˆç†æ€§æ£€æŸ¥
- æ’åå¤§å¹…æ³¢åŠ¨çš„å¼‚å¸¸æ£€æµ‹

## ğŸ”¬ **éªŒè¯ä¸æµ‹è¯•æ¡†æ¶**

### **å•å…ƒæµ‹è¯•è¦†ç›–**

#### **èŠ‚ç‚¹æŒ‡æ ‡æµ‹è¯• (`test_node_metrics.py`)**
```python
def test_degree_centrality_calculation():
    """æµ‹è¯•åº¦ä¸­å¿ƒæ€§è®¡ç®—çš„ç²¾ç¡®æ€§"""
    
def test_strength_centrality_with_weights():
    """æµ‹è¯•åŠ æƒå¼ºåº¦ä¸­å¿ƒæ€§çš„æ­£ç¡®æ€§"""
    
def test_betweenness_centrality_sampling():
    """æµ‹è¯•ä¸­ä»‹ä¸­å¿ƒæ€§é‡‡æ ·ç­–ç•¥çš„æœ‰æ•ˆæ€§"""
```

#### **å…¨å±€æŒ‡æ ‡æµ‹è¯• (`test_global_metrics.py`)**
```python  
def test_weighted_path_length_correction():
    """éªŒè¯åŠ æƒè·¯å¾„é•¿åº¦è®¡ç®—ä¿®æ­£çš„æ­£ç¡®æ€§"""
    
def test_density_calculation_accuracy():
    """æµ‹è¯•ç½‘ç»œå¯†åº¦è®¡ç®—çš„æ•°å­¦ç²¾åº¦"""
```

#### **é›†æˆæµ‹è¯• (`test_integration.py`)**
```python
def test_full_pipeline_consistency():
    """æµ‹è¯•å®Œæ•´è®¡ç®—æµç¨‹çš„ä¸€è‡´æ€§"""
    
def test_multi_year_calculation_stability():
    """éªŒè¯å¤šå¹´ä»½è®¡ç®—çš„ç¨³å®šæ€§"""
```

### **æ€§èƒ½åŸºå‡†æµ‹è¯•**

| è®¡ç®—ä»»åŠ¡ | ç½‘ç»œè§„æ¨¡ | è®¡ç®—æ—¶é—´ | å†…å­˜ä½¿ç”¨ | ç²¾åº¦ä¿è¯ |
|---------|---------|---------|---------|---------|
| åº¦ä¸­å¿ƒæ€§ | 200èŠ‚ç‚¹ | <1ç§’ | <50MB | ç²¾ç¡®è®¡ç®— |
| å¼ºåº¦ä¸­å¿ƒæ€§ | 200èŠ‚ç‚¹ | <1ç§’ | <50MB | ç²¾ç¡®è®¡ç®— |
| ä¸­ä»‹ä¸­å¿ƒæ€§ | 200èŠ‚ç‚¹ | <30ç§’ | <200MB | 10%é‡‡æ · |
| PageRank | 200èŠ‚ç‚¹ | <5ç§’ | <100MB | ç²¾ç¡®è®¡ç®— |
| å…¨å±€æŒ‡æ ‡ | 200èŠ‚ç‚¹ | <10ç§’ | <150MB | ç²¾ç¡®è®¡ç®— |

## ğŸ”— **ä¸æ•´ä½“ç ”ç©¶æ¡†æ¶çš„å…³ç³»**

### **æ•°æ®æµå‘**
```
02_net_analysis â†’ 03_metrics â†’ 04_policy_analysis
              â†’ 03_metrics â†’ 05_dli_analysis  
              â†’ 03_metrics â†’ 06_backbone_analysis
```

### **ä¸ºä¸‹æ¸¸æ¨¡å—æä¾›çš„æ ¸å¿ƒæ•°æ®**

#### **04_policy_analysisæ¨¡å—**
- æä¾›ç¾å›½èƒ½æºåœ°ä½å˜åŒ–çš„å®šé‡åŸºç¡€
- æ”¯æŒäº‹å‰-äº‹åå¯¹æ¯”åˆ†æçš„æŒ‡æ ‡æ—¶é—´åºåˆ—
- ä¸ºæ”¿ç­–å†²å‡»æ£€éªŒæä¾›ä¸­å¿ƒæ€§æ’åæ•°æ®

#### **05_dli_analysisæ¨¡å—**  
- æä¾›DLIæŒ‡æ ‡è®¡ç®—æ‰€éœ€çš„åŸºç¡€ç½‘ç»œç‰¹å¾
- æ”¯æŒåŠ¨æ€é”å®šæŒ‡æ•°çš„å¤šç»´åº¦åˆ†æ
- ä¸ºåŒå‘é”å®šåˆ†ææä¾›èŠ‚ç‚¹é‡è¦æ€§å‚è€ƒ

#### **06_backbone_analysisæ¨¡å—**
- ä¸ºéª¨å¹²ç½‘ç»œæå–æä¾›åŸå§‹ç½‘ç»œçš„æ‹“æ‰‘åŸºå‡†
- æ”¯æŒç¨³å¥æ€§æ£€éªŒä¸­çš„æŒ‡æ ‡å¯¹æ¯”åˆ†æ
- æä¾›ç½‘ç»œå¯è§†åŒ–çš„èŠ‚ç‚¹å¤§å°å’Œç€è‰²ä¾æ®

## ğŸ›¡ï¸ **æ–¹æ³•è®ºä¸¥è°¨æ€§ä¿è¯**

### **ç†è®ºä¸€è‡´æ€§**
- ä¸¥æ ¼éµå¾ªç½‘ç»œç§‘å­¦çš„ç»å…¸ç†è®ºæ¡†æ¶
- ä¸­å¿ƒæ€§æŒ‡æ ‡é€‰æ‹©æœ‰æ˜ç¡®çš„æ–‡çŒ®æ”¯æ’‘
- ç®—æ³•å®ç°ç¬¦åˆé¢†åŸŸæ ‡å‡†å’Œæœ€ä½³å®è·µ

### **è®¡ç®—ç²¾åº¦æ§åˆ¶**
- æ•°å€¼è®¡ç®—ç²¾åº¦éªŒè¯å’Œè¾¹ç•Œæ¡ä»¶å¤„ç†
- å¤§è§„æ¨¡ç½‘ç»œçš„é‡‡æ ·ç­–ç•¥ç§‘å­¦è®¾è®¡
- å¼‚å¸¸å€¼æ£€æµ‹å’Œæ•°æ®è´¨é‡ç›‘æ§æœºåˆ¶

### **å¯é‡ç°æ€§è®¾è®¡**
- å®Œæ•´çš„éšæœºç§å­æ§åˆ¶å’Œå‚æ•°é…ç½®
- è¯¦ç»†çš„è®¡ç®—æ—¥å¿—å’Œä¸­é—´ç»“æœä¿å­˜
- æ ‡å‡†åŒ–çš„æ•°æ®æ ¼å¼å’Œå¤„ç†æµç¨‹

## ğŸš€ **å¿«é€Ÿå¼€å§‹**

### **åŸºæœ¬ä½¿ç”¨**
```python
from src.03_metrics import calculate_all_metrics_for_year

# è®¡ç®—å•å¹´åº¦æ‰€æœ‰æŒ‡æ ‡
metrics_df = calculate_all_metrics_for_year(G_2020, 2020)

# æŸ¥çœ‹ç»“æœæ‘˜è¦
print(f"è®¡ç®—å®Œæˆ: {len(metrics_df)} ä¸ªå›½å®¶çš„ç½‘ç»œæŒ‡æ ‡")
print(f"æŒ‡æ ‡ç»´åº¦: {len(metrics_df.columns)} ä¸ª")
```

### **æ‰¹é‡è®¡ç®—**
```python
from src.03_metrics import calculate_metrics_for_multiple_years

# æ‰¹é‡è®¡ç®—å¤šå¹´ä»½æŒ‡æ ‡
annual_networks = load_annual_networks()  # ä»02æ¨¡å—åŠ è½½
all_metrics_df = calculate_metrics_for_multiple_years(annual_networks)

# å¯¼å‡ºç»“æœæ–‡ä»¶
from src.03_metrics import export_metrics_to_files
exported_files = export_metrics_to_files(all_metrics_df)
```

### **å®Œæ•´æµç¨‹**
```python
from src.03_metrics import run_full_metrics_calculation

# ä¸€é”®è¿è¡Œå®Œæ•´è®¡ç®—æµç¨‹
success = run_full_metrics_calculation()
if success:
    print("âœ… æ‰€æœ‰ç½‘ç»œæŒ‡æ ‡è®¡ç®—å®Œæˆå¹¶å·²å¯¼å‡º")
```

---

*æœ¬æ¨¡å—å°†æŠ½è±¡çš„ç½‘ç»œç»“æ„è½¬åŒ–ä¸ºå…·ä½“çš„æ•°é‡æŒ‡æ ‡ï¼Œä¸ºç†è§£å…¨çƒèƒ½æºè´¸æ˜“æ ¼å±€çš„æ¼”åŒ–æä¾›äº†ç§‘å­¦çš„æµ‹é‡å·¥å…·ã€‚æ¯ä¸€ä¸ªæŒ‡æ ‡éƒ½æ‰¿è½½ç€å¯¹å›½é™…èƒ½æºå…³ç³»çš„æ·±åˆ»æ´å¯Ÿã€‚*

**ç‰ˆæœ¬**: v3.0 | **æœ€åæ›´æ–°**: 2025-01-15 | **çŠ¶æ€**: ç”Ÿäº§å°±ç»ª