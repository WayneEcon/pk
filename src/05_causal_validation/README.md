# å› æœéªŒè¯åˆ†ææ¨¡å— v1.0
## 05_causal_validation - Causal Validation Analysis Module

---

## ğŸ¯ æ¨¡å—ç›®æ ‡

æœ¬æ¨¡å—å®ç°ä»**æè¿°æ€§åˆ†æ**å‘**å› æœæ¨æ–­**çš„å…³é”®è·ƒè¿›ï¼Œé€šè¿‡ä¸¥è°¨çš„è®¡é‡ç»æµå­¦æ–¹æ³•ï¼Œæ£€éªŒDLIï¼ˆåŠ¨æ€é”å®šæŒ‡æ•°ï¼‰ä¸ç½‘ç»œéŸ§æ€§ä¹‹é—´æ˜¯å¦å­˜åœ¨ç»Ÿè®¡ä¸Šæ˜¾è‘—çš„å› æœå…³ç³»ã€‚

### æˆ˜ç•¥æ„ä¹‰
- æä¾›å­¦æœ¯çº§å› æœæ¨æ–­è¯æ®ï¼Œæ»¡è¶³é¡¶çº§æœŸåˆŠå‘è¡¨æ ‡å‡†
- ä¸ºæ”¿ç­–åˆ¶å®šæä¾›ç§‘å­¦ä¾æ®ï¼Œæ”¯æŒèƒ½æºå®‰å…¨æˆ˜ç•¥å†³ç­–  
- å»ºç«‹èƒ½æºç½‘ç»œéŸ§æ€§çš„é‡åŒ–è¯„ä¼°æ¡†æ¶

---

## ğŸ—ï¸ æ ¸å¿ƒæ¶æ„

### æ ¸å¿ƒäº§å‡º
1. **ç½‘ç»œéŸ§æ€§æ•°æ®åº“** (`network_resilience.csv`)
   - 2001-2024å¹´é¢æ¿æ•°æ®
   - æ¯ä¸ªå›½å®¶çš„å¹´åº¦éŸ§æ€§å¾—åˆ†
   - åŒè½¨éŸ§æ€§æµ‹é‡ï¼šæ‹“æ‰‘æŠ—æ¯æ€§ + ä¾›åº”ç¼ºå£å¸æ”¶ç‡

2. **å› æœéªŒè¯æŠ¥å‘Š** (`causal_validation_report.md` & `.csv`)
   - åŒå‘å›ºå®šæ•ˆåº”é¢æ¿æ¨¡å‹ç»“æœ
   - å·¥å…·å˜é‡æ³•ç¨³å¥æ€§æ£€éªŒ
   - å­¦æœ¯æ ‡å‡†å›å½’è¡¨æ ¼å’Œç»Ÿè®¡æ£€éªŒ

### æ¨¡å—ç»“æ„
```
05_causal_validation/
â”œâ”€â”€ main.py                    # ä¸»åˆ†ææµç¨‹
â”œâ”€â”€ resilience_calculator.py   # ç½‘ç»œéŸ§æ€§è®¡ç®—å™¨
â”œâ”€â”€ causal_model.py            # å› æœæ¨æ–­æ¨¡å‹
â”œâ”€â”€ outputs/                   # åˆ†æç»“æœ
â”‚   â”œâ”€â”€ network_resilience.csv      # éŸ§æ€§æ•°æ®åº“
â”‚   â”œâ”€â”€ causal_validation_report.md # å­¦æœ¯æŠ¥å‘Š  
â”‚   â”œâ”€â”€ regression_results.csv      # å›å½’ç»“æœè¡¨
â”‚   â””â”€â”€ causal_validation_results.json # åŸå§‹ç»“æœ
â””â”€â”€ README.md                  # æœ¬æ–‡æ¡£
```

---

## ğŸ”¬ æ–¹æ³•è®ºæ¡†æ¶

### åŒè½¨éŸ§æ€§æµ‹é‡åŸåˆ™

ä¸ºç¡®ä¿ç»“è®ºç¨³å¥æ€§ï¼Œç½‘ç»œéŸ§æ€§é‡åŒ–å¹¶è¡Œé‡‡ç”¨ä¸¤ç§ç†è®ºåŸºç¡€ï¼š

#### 1. æ‹“æ‰‘æŠ—æ¯æ€§ (Topological Resilience)
- **ç†è®ºåŸºç¡€**: å¤æ‚ç½‘ç»œç†è®ºï¼Œè¿é€šæ€§æŸå¤±æµ‹é‡
- **æ–¹æ³•**: æ¨¡æ‹Ÿæ”»å‡»ï¼ˆç§»é™¤Top-KèŠ‚ç‚¹ï¼‰ï¼Œæµ‹é‡è¿é€šåˆ†é‡è§„æ¨¡ä¸‹é™
- **æ”»å‡»ç­–ç•¥**: åº¦ä¸­å¿ƒæ€§æ”»å‡»ã€ä»‹æ•°ä¸­å¿ƒæ€§æ”»å‡»ã€éšæœºæ”»å‡»
- **è¯„ä¼°æŒ‡æ ‡**: ç½‘ç»œç»“æ„ç¨³å®šæ€§ã€è¿é€šéŸ§æ€§ã€ä½ç½®ç¨³å®šæ€§

#### 2. ä¾›åº”ç¼ºå£å¸æ”¶ç‡ (Supply Gap Absorption Rate)  
- **ç†è®ºåŸºç¡€**: ç»æµéŸ§æ€§ç†è®ºï¼Œé€‚åº”æ€§ä¾›åº”æ›¿ä»£
- **æ–¹æ³•**: æ¨¡æ‹Ÿä¸»è¦ä¾›åº”å•†ä¸­æ–­ï¼Œæµ‹é‡æ›¿ä»£ä¾›åº”è·å–èƒ½åŠ›
- **è¯„ä¼°ç»´åº¦**: ä¾›åº”å¤šæ ·åŒ–ã€ç½‘ç»œæ·±åº¦ã€æ›¿ä»£è·¯å¾„æ•°é‡
- **å®é™…æ„ä¹‰**: çœŸå®ä¾›åº”é“¾ä¸­æ–­æƒ…å†µä¸‹çš„ç»æµé€‚åº”èƒ½åŠ›

### å› æœè¯†åˆ«ç­–ç•¥

#### åŸºå‡†æ¨¡å‹ï¼šåŒå‘å›ºå®šæ•ˆåº”é¢æ¿æ¨¡å‹
```
Resilience_it = Î²â‚€ + Î²â‚Â·DLI_it + Î³Â·Controls_it + Î±áµ¢ + Î»â‚œ + Îµáµ¢â‚œ
```

**æ§åˆ¶å˜é‡è®¾è®¡**ï¼š
- `Î±áµ¢`: å›½å®¶å›ºå®šæ•ˆåº” - æ§åˆ¶ä¸éšæ—¶é—´æ”¹å˜çš„å›½å®¶å¼‚è´¨æ€§
- `Î»â‚œ`: æ—¶é—´å›ºå®šæ•ˆåº” - æ§åˆ¶ä¸éšå›½å®¶æ”¹å˜çš„å¹´ä»½å®è§‚å†²å‡»  
- `Î²â‚`: **DLIå¯¹éŸ§æ€§çš„å› æœæ•ˆåº”**ï¼ˆæ ¸å¿ƒä¼°è®¡å‚æ•°ï¼‰

#### å†…ç”Ÿæ€§å¤„ç†ï¼šå·¥å…·å˜é‡æ³• (2SLS)
**ç¬¬ä¸€é˜¶æ®µ**: `DLI_it = Î± + Î³Â·IV_it + Î´Â·Controls_it + uáµ¢â‚œ`  
**ç¬¬äºŒé˜¶æ®µ**: `Resilience_it = Î² + Î¸Â·DLI_hat_it + Î»Â·Controls_it + Îµáµ¢â‚œ`

**å·¥å…·å˜é‡æ„å»º**ï¼š
- å†å²åŸºç¡€è®¾æ–½å­˜é‡ï¼ˆ1990å¹´ç®¡é“ã€æ¸¯å£ã€ç‚¼å‚å®¹é‡ï¼‰
- åœ°ç†è·ç¦»åŠ æƒçš„å…¶ä»–å›½å®¶DLIå†²å‡»
- DLIçš„æ·±åº¦æ»åé¡¹ï¼ˆå‡å°‘åå‘å› æœï¼‰

#### ç¨³å¥æ€§æ£€éªŒ
- **èšç±»æ ‡å‡†è¯¯**: å›½å®¶å±‚é¢èšç±»ï¼Œæ§åˆ¶åºåˆ—ç›¸å…³æ€§
- **å­æ ·æœ¬åˆ†æ**: 2008å¹´é‡‘èå±æœºå‰åç»“æ„ç¨³å®šæ€§æ£€éªŒ
- **å¼‚å¸¸å€¼æ£€éªŒ**: è¯†åˆ«å’Œæ’é™¤æç«¯è§‚æµ‹çš„å½±å“
- **æ»åæ•ˆåº”**: æ£€éªŒDLIå¯¹éŸ§æ€§çš„åŠ¨æ€å½±å“è·¯å¾„

---

## ğŸ“Š å­¦æœ¯æ ‡å‡†è¦æ±‚

### ç»Ÿè®¡æ˜¾è‘—æ€§æ ‡å‡†
- **Spearmanç›¸å…³ç³»æ•°** > 0.7 (ä¸€è‡´æ€§éªŒè¯)
- **æ ¸å¿ƒå‘ç°ç¨³å®šæ€§** > 80% (è·¨ä¸åŒÎ±å€¼)
- **ç»Ÿè®¡æ˜¾è‘—æ€§** p < 0.05 (ç¾å›½åœ°ä½å˜åŒ–)
- **æ”¿ç­–æ•ˆåº”ä¸€è‡´æ€§** > 75% (2016å¹´åè·¨ç®—æ³•)

### è¯Šæ–­æ£€éªŒè¦æ±‚
- **å¼±å·¥å…·å˜é‡æ£€éªŒ**: ç¬¬ä¸€é˜¶æ®µFç»Ÿè®¡é‡ > 10
- **è¿‡åº¦è¯†åˆ«æ£€éªŒ**: Sarganæ£€éªŒé€šè¿‡ (å¦‚é€‚ç”¨)
- **å¼‚æ–¹å·®æ£€éªŒ**: Whiteæ£€éªŒå’Œç¨³å¥æ ‡å‡†è¯¯
- **åºåˆ—ç›¸å…³æ£€éªŒ**: Durbin-Watsonç»Ÿè®¡é‡

---

## ğŸš€ ä½¿ç”¨æŒ‡å—

### å¿«é€Ÿå¼€å§‹

#### æ¼”ç¤ºæ¨¡å¼ï¼ˆæ¨èå…¥é—¨ï¼‰
```bash
cd 05_causal_validation
python main.py --demo
```

#### å®Œæ•´åˆ†ææ¨¡å¼
```bash
# ä½¿ç”¨çœŸå®æ•°æ®
python main.py --networks-dir ../02_data_processing/outputs \
                --dli-file ../04_dli_analysis/outputs/dli_results.csv

# æŒ‡å®šåˆ†æå‚æ•°
python main.py --demo --years 2010 2015 2020 \
                --countries USA CHN RUS DEU JPN
```

#### é«˜çº§é…ç½®
```bash
# è¯¦ç»†è¾“å‡ºæ¨¡å¼
python main.py --demo --verbose

# è‡ªå®šä¹‰è¾“å‡ºç›®å½•  
python main.py --demo --output-dir my_causal_analysis
```

### ç¨‹åºåŒ–è°ƒç”¨

```python
from causal_validation import CausalValidationPipeline

# åˆå§‹åŒ–åˆ†æç®¡é“
pipeline = CausalValidationPipeline(output_dir="outputs")

# è¿è¡Œå®Œæ•´åˆ†æ
results = pipeline.run_full_pipeline(
    networks_dir="../02_networks",
    dli_file="../05_dli/dli.csv",
    years=[2010, 2015, 2020],
    countries=['USA', 'CHN', 'RUS']
)

# æŸ¥çœ‹åˆ†æç»“æœ
print(f"å› æœè¯æ®å¼ºåº¦: {results['causal_results']['overall_assessment']['causal_evidence_strength']}")
```

---

## ğŸ“ˆ è¾“å‡ºè§£è¯»

### network_resilience.csv å­—æ®µè¯´æ˜

| å­—æ®µå | å«ä¹‰ | å–å€¼èŒƒå›´ |
|--------|------|----------|
| `year` | å¹´ä»½ | 2001-2024 |
| `country` | å›½å®¶ä»£ç  | ISO 3å­—ç¬¦ä»£ç  |
| `topological_resilience_avg` | å¹³å‡æ‹“æ‰‘æŠ—æ¯æ€§ | 0-1 (è¶Šé«˜è¶ŠéŸ§æ€§) |
| `topological_resilience_degree` | åº¦æ”»å‡»éŸ§æ€§ | 0-1 |
| `supply_absorption_rate` | ä¾›åº”ç¼ºå£å¸æ”¶ç‡ | 0-1 |
| `supply_diversification_index` | ä¾›åº”å¤šæ ·åŒ–æŒ‡æ•° | 0-1 |
| `comprehensive_resilience` | **ç»¼åˆéŸ§æ€§æŒ‡æ•°** | 0-1 |

### å›å½’ç»“æœè§£è¯»

#### ç³»æ•°è§£é‡Š
- **æ­£ç³»æ•°**: DLIå¢åŠ ï¼ˆé”å®šç¨‹åº¦ä¸Šå‡ï¼‰â†’ éŸ§æ€§ä¸‹é™
- **è´Ÿç³»æ•°**: DLIå¢åŠ  â†’ éŸ§æ€§æå‡ï¼ˆåç›´è§‰ï¼Œéœ€æ£€æŸ¥ï¼‰
- **ç³»æ•°å¤§å°**: è¡¨ç¤ºDLIå˜åŒ–1å•ä½å¯¹éŸ§æ€§çš„è¾¹é™…å½±å“

#### æ˜¾è‘—æ€§åˆ¤æ–­
- `***`: p < 0.01 (é«˜åº¦æ˜¾è‘—)
- `**`: p < 0.05 (æ˜¾è‘—) 
- `*`: p < 0.10 (è¾¹é™…æ˜¾è‘—)
- æ— æ ‡è®°: p â‰¥ 0.10 (ä¸æ˜¾è‘—)

#### æ¨¡å‹è¯Šæ–­
- **RÂ²**: æ¨¡å‹è§£é‡ŠåŠ›ï¼ˆè¶Šé«˜è¶Šå¥½ï¼Œé€šå¸¸>0.3ï¼‰
- **ç¬¬ä¸€é˜¶æ®µF**: å·¥å…·å˜é‡å¼ºåº¦ï¼ˆ>10ä¸ºå¼ºå·¥å…·å˜é‡ï¼‰
- **è§‚æµ‹æ•°**: æœ‰æ•ˆæ ·æœ¬è§„æ¨¡ï¼ˆè¶Šå¤§è¶Šå¯ä¿¡ï¼‰

---

## âš™ï¸ ä¾èµ–ç¯å¢ƒ

### æ ¸å¿ƒä¾èµ–
```
python >= 3.8
networkx >= 2.8     # ç½‘ç»œåˆ†æ
pandas >= 1.5       # æ•°æ®å¤„ç†
numpy >= 1.21       # æ•°å€¼è®¡ç®—
scipy >= 1.9        # ç»Ÿè®¡å‡½æ•°
matplotlib >= 3.5   # åŸºç¡€ç»˜å›¾
seaborn >= 0.11     # ç»Ÿè®¡å¯è§†åŒ–
scikit-learn >= 1.0 # æœºå™¨å­¦ä¹ ç®—æ³•
tqdm >= 4.0         # è¿›åº¦æ¡
```

### ä¸“ä¸šè®¡é‡åº“ï¼ˆå¯é€‰ä½†æ¨èï¼‰
```
statsmodels >= 0.13  # è®¡é‡ç»æµå­¦æ¨¡å‹
linearmodels >= 4.0  # é¢æ¿æ•°æ®å’Œå·¥å…·å˜é‡
```

**å®‰è£…å‘½ä»¤**ï¼š
```bash
pip install networkx pandas numpy scipy matplotlib seaborn scikit-learn tqdm
pip install statsmodels linearmodels  # ä¸“ä¸šè®¡é‡åº“
```

---

## ğŸ” è´¨é‡ä¿è¯

### æµ‹è¯•è¦†ç›–
- **å•å…ƒæµ‹è¯•**: æ¯ä¸ªæ ¸å¿ƒå‡½æ•°çš„æ­£ç¡®æ€§éªŒè¯
- **é›†æˆæµ‹è¯•**: å®Œæ•´åˆ†ææµç¨‹çš„ç«¯åˆ°ç«¯éªŒè¯  
- **å›å½’æµ‹è¯•**: ç¡®ä¿ä»£ç æ›´æ–°ä¸ç ´åç°æœ‰åŠŸèƒ½
- **æ•°æ®éªŒè¯**: è¾“å…¥æ•°æ®æ ¼å¼å’Œå†…å®¹çš„è‡ªåŠ¨æ£€æŸ¥

### ä»£ç è§„èŒƒ
- **PEP 8**: Pythonä»£ç é£æ ¼æ ‡å‡†
- **ç±»å‹æç¤º**: å‡½æ•°å‚æ•°å’Œè¿”å›å€¼çš„ç±»å‹æ³¨é‡Š
- **æ–‡æ¡£å­—ç¬¦ä¸²**: è¯¦ç»†çš„å‡½æ•°å’Œç±»è¯´æ˜
- **å¼‚å¸¸å¤„ç†**: ä¼˜é›…çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·æç¤º

### å¯é‡ç°æ€§
- **å›ºå®šéšæœºç§å­**: ç¡®ä¿éšæœºè¿‡ç¨‹çš„å¯é‡å¤æ€§
- **ç‰ˆæœ¬æ§åˆ¶**: ä¾èµ–åº“ç‰ˆæœ¬çš„ç²¾ç¡®æ§åˆ¶
- **æ•°æ®æº¯æº**: å®Œæ•´çš„æ•°æ®å¤„ç†æµç¨‹è®°å½•
- **å¼€æºä»£ç **: æ‰€æœ‰åˆ†æä»£ç å…¬å¼€å¯å®¡è®¡

---

## ğŸ“š å­¦æœ¯åº”ç”¨

### é€‚ç”¨åœºæ™¯
- **é¡¶çº§æœŸåˆŠå‘è¡¨**: Nature, Science, PNASç­‰é¡¶çº§æœŸåˆŠè®ºæ–‡
- **æ”¿ç­–åˆ¶å®šæ”¯æŒ**: å›½å®¶èƒ½æºå®‰å…¨æˆ˜ç•¥åˆ¶å®šçš„ç§‘å­¦ä¾æ®
- **ç›‘ç®¡å†³ç­–**: èƒ½æºç›‘ç®¡æœºæ„çš„é‡åŒ–åˆ†æå·¥å…·
- **é£é™©è¯„ä¼°**: èƒ½æºä¼ä¸šå’ŒæŠ•èµ„æœºæ„çš„é£é™©ç®¡ç†

### å¼•ç”¨æ ¼å¼
```bibtex
@software{energy_network_causal_validation,
  title={Energy Network Causal Validation Analysis Module v1.0},
  author={Energy Network Analysis Team},
  year={2025},
  url={https://github.com/energy-network-analysis/causal-validation},
  note={Econometric Causal Inference Edition}
}
```

---

## ğŸ†˜ æŠ€æœ¯æ”¯æŒ

### å¸¸è§é—®é¢˜

**Q: ä¸ºä»€ä¹ˆé€‰æ‹©åŒè½¨éŸ§æ€§æµ‹é‡ï¼Ÿ**
A: å•ä¸€æŒ‡æ ‡å¯èƒ½å­˜åœ¨æµ‹é‡åå·®ã€‚æ‹“æ‰‘éŸ§æ€§å…³æ³¨ç½‘ç»œç»“æ„ç¨³å®šæ€§ï¼Œä¾›åº”å¸æ”¶ç‡å…³æ³¨ç»æµé€‚åº”èƒ½åŠ›ï¼Œä¸¤è€…ç»“åˆæä¾›æ›´å…¨é¢çš„éŸ§æ€§è¯„ä¼°ã€‚

**Q: å·¥å…·å˜é‡çš„æœ‰æ•ˆæ€§å¦‚ä½•ä¿è¯ï¼Ÿ**
A: é€šè¿‡ç¬¬ä¸€é˜¶æ®µFæ£€éªŒï¼ˆ>10ï¼‰å’Œè¿‡åº¦è¯†åˆ«æ£€éªŒç¡®ä¿å·¥å…·å˜é‡å¼ºåº¦å’Œå¤–ç”Ÿæ€§ã€‚å†å²åŸºç¡€è®¾æ–½æ•°æ®åœ¨æ—¶é—´ä¸Šå…ˆäºå½“æœŸDLIï¼Œæ»¡è¶³å¤–ç”Ÿæ€§è¦æ±‚ã€‚

**Q: å¦‚ä½•å¤„ç†æ•°æ®ç¼ºå¤±é—®é¢˜ï¼Ÿ**
A: é‡‡ç”¨åˆ—è¡¨åˆ é™¤æ³•å¤„ç†ç¼ºå¤±å€¼ï¼Œç¡®ä¿åˆ†ææ ·æœ¬çš„å®Œæ•´æ€§ã€‚å¯¹äºå…³é”®å˜é‡ç¼ºå¤±ä¸¥é‡çš„æƒ…å†µï¼Œä¼šåœ¨æŠ¥å‘Šä¸­æ˜ç¡®è¯´æ˜é™åˆ¶ã€‚

### è”ç³»æ–¹å¼
- **æŠ€æœ¯æ”¯æŒ**: Energy Network Analysis Team
- **BugæŠ¥å‘Š**: é€šè¿‡GitHub Issuesæäº¤
- **å­¦æœ¯åˆä½œ**: è”ç³»é¡¹ç›®ä¸»è¦ç ”ç©¶è€…

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-08-15)
- âœ… åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… å®ç°åŒè½¨éŸ§æ€§æµ‹é‡æ¡†æ¶
- âœ… å®ŒæˆåŒå‘å›ºå®šæ•ˆåº”é¢æ¿æ¨¡å‹
- âœ… é›†æˆå·¥å…·å˜é‡æ³•å’Œç¨³å¥æ€§æ£€éªŒ
- âœ… ç”Ÿæˆå­¦æœ¯æ ‡å‡†æŠ¥å‘Šå’ŒCSVç»“æœ
- âœ… æä¾›å®Œæ•´çš„å‘½ä»¤è¡Œæ¥å£å’Œç¨‹åºåŒ–API

---

*ç‰ˆæœ¬: v1.0 (Econometric Causal Inference Edition)*  
*æœ€åæ›´æ–°: 2025-08-15*  
*æ–‡æ¡£è¯­è¨€: ä¸­è‹±åŒè¯­*